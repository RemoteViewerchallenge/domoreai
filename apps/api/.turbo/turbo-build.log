
> api@1.0.0 build /home/guy/mono/apps/api
> tsc -b

src/repositories/AgentConfigRepository.ts(31,9): error TS2322: Type 'Record<string, unknown>' is not assignable to type 'JsonNull | InputJsonValue | undefined'.
  Type 'Record<string, unknown>' is missing the following properties from type 'readonly (InputJsonValue | null)[]': length, concat, join, slice, and 20 more.
src/repositories/PrismaAgentConfigRepository.ts(31,9): error TS2322: Type 'Record<string, unknown>' is not assignable to type 'JsonNull | InputJsonValue | undefined'.
  Type 'Record<string, unknown>' is missing the following properties from type 'readonly (InputJsonValue | null)[]': length, concat, join, slice, and 20 more.
src/routers/index.ts(10,10): error TS2305: Module '"./agent.router.js"' has no exported member 'agentRouter'.
src/routers/role.router.ts(150,9): error TS2353: Object literal may only specify known properties, and 'preferredModels' does not exist in type 'RoleInclude<DefaultArgs>'.
src/routers/role.router.ts(320,9): error TS2322: Type '{ name?: string | undefined; category?: string | undefined; tools?: string[] | undefined; basePrompt?: string | undefined; hardcodedModelId?: string | null | undefined; hardcodedProviderId?: string | ... 1 more ... | undefined; ... 7 more ...; needsUncensored?: boolean | undefined; }' is not assignable to type '(Without<RoleUpdateInput, RoleUncheckedUpdateInput> & RoleUncheckedUpdateInput) | (Without<...> & RoleUpdateInput)'.
  Type '{ name?: string | undefined; category?: string | undefined; tools?: string[] | undefined; basePrompt?: string | undefined; hardcodedModelId?: string | null | undefined; hardcodedProviderId?: string | ... 1 more ... | undefined; ... 7 more ...; needsUncensored?: boolean | undefined; }' is not assignable to type 'Without<RoleUncheckedUpdateInput, RoleUpdateInput> & RoleUpdateInput'.
    Types of property 'category' are incompatible.
      Type 'string | undefined' is not assignable to type 'RoleCategoryUpdateOneWithoutRolesNestedInput | undefined'.
        Type 'string' has no properties in common with type 'RoleCategoryUpdateOneWithoutRolesNestedInput'.
src/scripts/categorize-roles.ts(94,11): error TS2559: Type 'string' has no properties in common with type 'RoleCategoryUpdateOneWithoutRolesNestedInput'.
src/scripts/categorize-roles.ts(97,28): error TS2339: Property 'maxContext' does not exist on type '{ id: string; name: string; description: string | null; basePrompt: string; tools: string[]; categoryString: string | null; categoryId: string | null; metadata: JsonValue; createdAt: Date; updatedAt: Date; }'.
src/scripts/categorize-roles.ts(97,47): error TS2339: Property 'maxContext' does not exist on type '{ id: string; name: string; description: string | null; basePrompt: string; tools: string[]; categoryString: string | null; categoryId: string | null; metadata: JsonValue; createdAt: Date; updatedAt: Date; }'.
src/scripts/categorize-roles.ts(97,73): error TS2339: Property 'maxContext' does not exist on type '{ id: string; name: string; description: string | null; basePrompt: string; tools: string[]; categoryString: string | null; categoryId: string | null; metadata: JsonValue; createdAt: Date; updatedAt: Date; }'.
src/scripts/fix-roles.ts(29,17): error TS2339: Property 'maxContext' does not exist on type '{ id: string; name: string; description: string | null; basePrompt: string; tools: string[]; categoryString: string | null; categoryId: string | null; metadata: JsonValue; createdAt: Date; updatedAt: Date; }'.
src/scripts/fix-roles.ts(29,36): error TS2339: Property 'maxContext' does not exist on type '{ id: string; name: string; description: string | null; basePrompt: string; tools: string[]; categoryString: string | null; categoryId: string | null; metadata: JsonValue; createdAt: Date; updatedAt: Date; }'.
src/scripts/fix-roles.ts(34,16): error TS2339: Property 'minContext' does not exist on type '{ id: string; name: string; description: string | null; basePrompt: string; tools: string[]; categoryString: string | null; categoryId: string | null; metadata: JsonValue; createdAt: Date; updatedAt: Date; }'.
src/scripts/fix-roles.ts(34,44): error TS2339: Property 'minContext' does not exist on type '{ id: string; name: string; description: string | null; basePrompt: string; tools: string[]; categoryString: string | null; categoryId: string | null; metadata: JsonValue; createdAt: Date; updatedAt: Date; }'.
src/scripts/fix-roles.ts(47,17): error TS2551: Property 'category' does not exist on type '{ id: string; name: string; description: string | null; basePrompt: string; tools: string[]; categoryString: string | null; categoryId: string | null; metadata: JsonValue; createdAt: Date; updatedAt: Date; }'. Did you mean 'categoryId'?
src/scripts/seed_datacenter_helper.ts(25,7): error TS2559: Type 'string' has no properties in common with type 'RoleCategoryUpdateOneWithoutRolesNestedInput'.
src/scripts/seed_datacenter_helper.ts(55,7): error TS2559: Type 'string' has no properties in common with type 'RoleCategoryCreateNestedOneWithoutRolesInput'.
src/scripts/seed_prompt_engineer.ts(13,7): error TS2559: Type 'string' has no properties in common with type 'RoleCategoryUpdateOneWithoutRolesNestedInput'.
src/scripts/seed_prompt_engineer.ts(24,7): error TS2559: Type 'string' has no properties in common with type 'RoleCategoryCreateNestedOneWithoutRolesInput'.
src/services/AgentFactory.ts(229,17): error TS2353: Object literal may only specify known properties, and 'minContext' does not exist in type 'RoleCreateInput'.
src/services/AgentFactory.ts(302,57): error TS2345: Argument of type 'LLMModel' is not assignable to parameter of type 'ModelDef'.
  Property 'providerId' is missing in type 'LLMModel' but required in type 'ModelDef'.
src/services/AgentFactory.ts(311,43): error TS2339: Property 'getModelConfig' does not exist on type 'IAgentConfigRepository'.
src/services/AgentFactory.ts(315,47): error TS2339: Property 'createModelConfig' does not exist on type 'IAgentConfigRepository'.
src/services/ModelConfigurator.ts(2,17): error TS2305: Module '"@prisma/client"' has no exported member 'ModelConfig'.
src/services/ModelConfigurator.ts(35,62): error TS2339: Property 'defaultTemperature' does not exist on type '{ id: string; name: string; description: string | null; basePrompt: string; tools: string[]; categoryString: string | null; categoryId: string | null; metadata: JsonValue; createdAt: Date; updatedAt: Date; }'.
src/services/ModelConfigurator.ts(36,59): error TS2339: Property 'defaultMaxTokens' does not exist on type '{ id: string; name: string; description: string | null; basePrompt: string; tools: string[]; categoryString: string | null; categoryId: string | null; metadata: JsonValue; createdAt: Date; updatedAt: Date; }'.
src/services/ModelConfigurator.ts(76,22): error TS2339: Property 'modelConfig' does not exist on type 'PrismaClient<PrismaClientOptions, never, DefaultArgs>'.
src/services/agent.service.ts(3,35): error TS2459: Module '"./AgentFactory.js"' declares 'CardAgentState' locally, but it is not exported.
src/services/modelManager.service.ts(41,9): error TS2353: Object literal may only specify known properties, and 'modelConfigId' does not exist in type 'Without<ModelUsageCreateInput, ModelUsageUncheckedCreateInput> & ModelUsageUncheckedCreateInput'.
src/services/modelManager.service.ts(93,39): error TS7006: Parameter 'm' implicitly has an 'any' type.
src/services/modelManager.service.ts(135,15): error TS2353: Object literal may only specify known properties, and 'hardcodedModelId' does not exist in type 'RoleSelect<DefaultArgs>'.
src/services/modelManager.service.ts(138,25): error TS2339: Property 'hardcodedModelId' does not exist on type '{ id: string; name: string; description: string | null; basePrompt: string; tools: string[]; categoryString: string | null; categoryId: string | null; metadata: JsonValue; createdAt: Date; updatedAt: Date; }'.
src/services/modelManager.service.ts(138,62): error TS2339: Property 'hardcodedProviderId' does not exist on type '{ id: string; name: string; description: string | null; basePrompt: string; tools: string[]; categoryString: string | null; categoryId: string | null; metadata: JsonValue; createdAt: Date; updatedAt: Date; }'.
src/services/modelManager.service.ts(139,13): error TS2339: Property 'hardcodedModelId' does not exist on type '{ id: string; name: string; description: string | null; basePrompt: string; tools: string[]; categoryString: string | null; categoryId: string | null; metadata: JsonValue; createdAt: Date; updatedAt: Date; }'.
src/services/modelManager.service.ts(139,31): error TS2339: Property 'hardcodedProviderId' does not exist on type '{ id: string; name: string; description: string | null; basePrompt: string; tools: string[]; categoryString: string | null; categoryId: string | null; metadata: JsonValue; createdAt: Date; updatedAt: Date; }'.
src/services/modelManager.service.ts(213,7): error TS2353: Object literal may only specify known properties, and 'preferredModels' does not exist in type 'RoleInclude<DefaultArgs>'.
src/services/modelManager.service.ts(229,13): error TS2339: Property 'preferredModels' does not exist on type '{ id: string; name: string; description: string | null; basePrompt: string; tools: string[]; categoryString: string | null; categoryId: string | null; metadata: JsonValue; createdAt: Date; updatedAt: Date; }'.
src/services/modelManager.service.ts(229,37): error TS2339: Property 'preferredModels' does not exist on type '{ id: string; name: string; description: string | null; basePrompt: string; tools: string[]; categoryString: string | null; categoryId: string | null; metadata: JsonValue; createdAt: Date; updatedAt: Date; }'.
src/services/modelManager.service.ts(237,34): error TS2339: Property 'preferredModels' does not exist on type '{ id: string; name: string; description: string | null; basePrompt: string; tools: string[]; categoryString: string | null; categoryId: string | null; metadata: JsonValue; createdAt: Date; updatedAt: Date; }'.
src/services/modelManager.service.ts(255,9): error TS2353: Object literal may only specify known properties, and 'modelConfig' does not exist in type 'ModelUsageWhereInput'.
src/services/orchestration.service.ts(346,29): error TS2339: Property 'defaultTemperature' does not exist on type '{ id: string; name: string; description: string | null; basePrompt: string; tools: string[]; categoryString: string | null; categoryId: string | null; metadata: JsonValue; createdAt: Date; updatedAt: Date; }'.
src/services/orchestration.service.ts(347,27): error TS2339: Property 'defaultMaxTokens' does not exist on type '{ id: string; name: string; description: string | null; basePrompt: string; tools: string[]; categoryString: string | null; categoryId: string | null; metadata: JsonValue; createdAt: Date; updatedAt: Date; }'.
src/tools/meta.ts(65,11): error TS2353: Object literal may only specify known properties, and 'minContext' does not exist in type '(Without<RoleCreateInput, RoleUncheckedCreateInput> & RoleUncheckedCreateInput) | (Without<...> & RoleCreateInput)'.
src/tools/meta.ts(100,11): error TS2353: Object literal may only specify known properties, and 'needsVision' does not exist in type 'RoleSelect<DefaultArgs>'.
src/tools/meta.ts(139,11): error TS2353: Object literal may only specify known properties, and 'needsVision' does not exist in type '(Without<RoleUpdateInput, RoleUncheckedUpdateInput> & RoleUncheckedUpdateInput) | (Without<...> & RoleUpdateInput)'.
test-model-json.ts(2,41): error TS2307: Cannot find module './src/services/modelManager.service' or its corresponding type declarations.
 ELIFECYCLE  Command failed with exit code 1.
